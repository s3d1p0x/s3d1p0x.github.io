{% capture logo_path %}{{ site.logo }}{% endcapture %}

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        {% unless logo_path == empty %}
          <a class="site-logo" href="{{ '/' | relative_url }}"><img src="{{ logo_path | relative_url }}" alt="{{ site.masthead_title | default: site.title }}"></a>
        {% endunless %}
        <a class="site-title" href="{{ '/' | relative_url }}">
          {{ site.masthead_title | default: site.title }}
          {% if site.subtitle %}<span class="site-subtitle">{{ site.subtitle }}</span>{% endif %}
        </a>
        <ul class="visible-links">
          {%- for link in site.data.navigation.main -%}
            <li class="masthead__menu-item">
              <a
                href="{{ link.url | relative_url }}"
                {% if link.description %} title="{{ link.description }}"{% endif %}
                {% if link.target %} target="{{ link.target }}"{% endif %}
              >{{ link.title }}</a>
            </li>
          {%- endfor -%}
        </ul>
        {% if site.search == true %}
        <button class="search__toggle" type="button">
          <span class="visually-hidden">{{ site.data.ui-text[site.locale].search_label | default: "Toggle search" }}</span>
          <i class="fas fa-search"></i>
        </button>
        {% endif %}
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">{{ site.data.ui-text[site.locale].menu_label | default: "Toggle menu" }}</span>
          <div class="navicon"></div>
        </button>






        <!-- Bouton de traduction dans le masthead -->
        <div class="language-selector-wrapper">
          <button 
            onclick="toggleLanguage()" 
            class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 hover:bg-gray-700 active:bg-gray-600 border border-gray-600 shadow-sm active:shadow-none h-8 w-8 transition-all" 
            type="button"
            aria-label="Change language"
            title="Translate">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-languages h-4 w-4">
              <path d="m5 8 6 6"></path>
              <path d="m4 14 6-6 2-3"></path>
              <path d="M2 5h12"></path>
              <path d="M7 2h1"></path>
              <path d="m22 22-5-10-5 10"></path>
              <path d="M14 18h6"></path>
            </svg>
            <span class="sr-only">Change language</span>
          </button>
          
          <!-- Widget Google Translate cach√© -->
          <div id="google_translate_element" style="display: none;"></div>
        </div>

        
        
        <script type="text/javascript">
          var translateInitialized = false;
          
          function googleTranslateElementInit() {
            try {
              new google.translate.TranslateElement({
                pageLanguage: 'en',
                includedLanguages: 'fr,en',
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
                autoDisplay: false
              }, 'google_translate_element');
              
              // Attendre plus longtemps et v√©rifier plusieurs fois
              checkTranslateReady(0);
            } catch(e) {
              console.error('Google Translate init error:', e);
            }
          }
          
          function checkTranslateReady(attempt) {
            if (attempt > 10) {
              console.warn('Google Translate failed to load after 10 attempts');
              return;
            }
            
            setTimeout(function() {
              var translateSelect = document.querySelector('.goog-te-combo');
              if (translateSelect) {
                translateInitialized = true;
                console.log('‚úÖ Google Translate ready!');
              } else {
                console.log('‚è≥ Attempt ' + (attempt + 1) + '/10: Waiting for translate...');
                checkTranslateReady(attempt + 1);
              }
            }, 500);
          }
          
          function toggleLanguage() {
            if (!translateInitialized) {
              alert('Please wait a moment for translation to load...');
              setTimeout(toggleLanguage, 1000);
              return;
            }
            
            var translateSelect = document.querySelector('.goog-te-combo');
            if (translateSelect) {
              var currentLang = translateSelect.value;
              translateSelect.value = (currentLang === 'fr') ? 'en' : 'fr';
              translateSelect.dispatchEvent(new Event('change'));
              console.log('üåç Language changed to:', translateSelect.value);
            }
          }
          </script>
        
        <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
        
        <style>
        /* Masquer la banni√®re Google Translate */
        .goog-te-banner-frame.skiptranslate {
          display: none !important;
        }
        
        body {
          top: 0px !important;
        }
        
        /* Style du bouton de traduction */
        .language-selector-wrapper {
          display: inline-block;
          margin-left: 1.5rem; /* Espacement comme entre les titres */
        }
        
        .language-selector-wrapper button {
          background-color: transparent;
          color: #d1d5db;
          cursor: pointer;
        }
        
        .language-selector-wrapper button:hover {
          transform: translateY(-1px);
        }
        
        .language-selector-wrapper button:active {
          transform: translateY(1px);
        }
        
        /* Masquer le widget Google Translate par d√©faut */
        #google_translate_element {
          display: none !important;
        }
        
        /* Styles pour screen readers */
        .sr-only {
          position: absolute;
          width: 1px;
          height: 1px;
          padding: 0;
          margin: -1px;
          overflow: hidden;
          clip: rect(0, 0, 0, 0);
          white-space: nowrap;
          border-width: 0;
        }
        </style>









        
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>
